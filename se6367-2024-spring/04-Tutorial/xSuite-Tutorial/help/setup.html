<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">	<title>atac: Setting Up Your Environment</title><style type="text/css"><!--@media screen {BODY { background-color:#525951; } } @media screen {#wrap { background-color:#fffeee;border-bottom:gray 1px dotted;border-left:gray 1px dotted;border-right:gray 1px dotted;border-top:gray 1px dotted;font-family:veranda , geneva , arial , sans-serif;font-size:90%;margin:0px auto;padding-bottom:30px;padding-left:30px;padding-right:30px;padding-top:30px;text-align:justify;width:950px; } } @media screen {H1 { font-size:160%;margin-bottom:15px; } } @media screen {H2 { font-size:100%;margin-bottom:10px; } } @media screen {A[href] { color:#e55322;text-decoration:none; } } @media screen {A[href]:hover { background-color:#b6db83;color:#fff991; } } @media screen {#titlepage { text-align:center; } } @media screen {#toc { color:red;font-size:150%;margin-top:10px; } } @media screen {#toc LI { list-style-type:none; } } @media screen {.majortitle { font-size:200%;font-weight:bold; } } @media screen {.figure { border-bottom:black 1px dotted;border-left:black 1px dotted;border-right:black 1px dotted;border-top:black 1px dotted;clear:right;float:right;margin-bottom:20px;margin-left:20px;padding-bottom:5px;padding-top:5px;text-align:center; } } @media screen {.figure A IMG { border-bottom:black 1px solid;border-left:black 1px solid;border-right:black 1px solid;border-top:black 1px solid;margin:10px;width:150px; } } @media screen {.figure DIV { font-size:70%;font-style:italic;padding-left:5px;padding-right:5px;text-align:center;width:200px; } } @media screen {.figure-odd { clear:left;float:left;margin-left:0px;margin-right:20px; } } @media screen {UL { font-size:80%;margin:10px; } } @media screen {.important { border-bottom:red 1px solid;border-left:red 1px solid;border-right:red 1px solid;border-top:red 1px solid;font-size:90%;font-weight:bold;margin:0px 200px;padding-bottom:5px;padding-left:5px;padding-right:5px;padding-top:5px;text-align:justify; } } @media screen {#deferred { color:green;font-size:70%;font-style:italic; } } @media screen {.footer { clear:all;font-size:80%; } }--></style></head><body><div id="wrap"><a href="coverpage.html"><span>[Top]</span></a><span> </span><a href="overview.html"><span>[Prev]</span></a><span> </span><a href="instrumenting.html"><span>[Next]</span></a><span> </span><a href="sqatoolIX.html"><span>[Index]</span></a><span> </span><a href="sqatoolTOC.html"><span>[TOC]</span></a><span> </span><hr><br><h1><a></a></h1><h1><a></a></h1><h1><a name="Setting Up Your Execution Environment"><span>Chapter 4</span><br><br><span>ATAC: Setting Up Your Execution Environment</span><br><br></a></h1><a></a><p><a><span>This chapter discusses how to set up your execution environment in order to use, or modify the behavior of, ATAC.</span></a><span> </span><a href="setup.html#107284"><span>Section 4.1</span></a><span> provides general information and describes the environment variables which are common to Linux and Windows platforms. </span><a href="setup.html#107940"><span>Section 4.2</span></a><span> describes variables specific to the Linux environment. </span><a href="setup.html#108627"></a></p><hr><h2><a name="Common Environment Variables"><span>4.1 Common Environment Variables</span></a></h2><a><span>ATAC components make use of a number of environment variables. The role played by each of these variables and the specific ATAC components that make use of their values are discussed below.</span></a><span> </span><p><a><span>Some of these variables are set to yes or no. For these variables, off, false, f, n, and, 0 are equivalent to no; on, true, t, y, and non-zero numbers are equivalent to yes; upper and lower case are not distinguished.</span></a></p><h3><a name="ATAC_BLOCKONLY"><span>4.1.1 ATAC_BLOCKONLY</span></a></h3><a><span>When a test is run, ATAC records data for a number of types of coverage (see</span></a><span> </span><a href="overview.html#623861"><span>Section 3.3, What Does ATAC Do?</span></a><span>). For very large programs it may be necessary to restrict run-time recording to reduce the execution time and disk space (see </span><a href="overview.html#623840"><span>Section 3.5, What Will Using ATAC Cost You?</span></a><span>). If ATAC_BLOCKONLY is set to yes at run-time, ATAC will only record data for block coverage and weaker coverage types. Zero is displayed for other coverage types. Tests run with this option set can be identified in the atactm -L listing by the B flag (see. </span><a href="managing.html#973880"><span>Section 7.1, Listing Test Cases</span></a><span>). </span><h3><a name="ATAC_COMPRESS"><span>4.1.2 ATAC_COMPRESS</span></a></h3><a><span>In order to save disk space, atac instruments the program under test to compress the</span><br><span>trace file after each test execution. The ATAC_COMPRESS variable may be used to suppress compression completely or to compress periodically. If ATAC_COMPRESS is set to no when the program is executed, trace file compression is suppressed. If ATAC_COMPRESS is set to an integer n, the trace file will be compressed after approximately every n test executions. A trace file can be explicitly compressed using atactm, regardless of whether or not ATAC_COMPRESS is set.</span></a><span> </span><h3><a name="ATAC_COST"><span>4.1.3 ATAC_COST</span></a></h3><a><span>If ATAC_COST has a numeric value it will be assigned as the execution cost of the test case. Test case costs are used by ATAC to compute a minimal test set (atac -M) or a cost effective ordering (atac -S). The default value of ATAC_COST is 100.</span></a><span> </span><h3><a name="ATAC_DIR"><span>4.1.4 ATAC_DIR</span></a></h3><a><span>By default, trace data is written to a file in the current directory. If ATAC_DIR is set it is the path name of the directory in which trace data is written. However, if ATAC_TRACE (see</span></a><span> </span><a href="setup.html#108499"><span>Section 4.1.7, ATAC_TRACE</span></a><span>) is set to a fully qualified path name, ATAC_DIR is not used. </span><h3><a name="ATAC_DYNAMIC_LINKING"><span>4.1.5 ATAC_DYNAMIC_LINKING</span></a></h3><a><span>ATAC_DYNAMIC_LINKING is set to 'false' by default, but must be set to 'true' for programs that dynamically load libraries (.dll or .so).  If a program loads dynamically-linked libraries at runtime, and these libraries were instrumented by SQA Tool, SQA Tool will track coverage in these libraries. At the end of execution, SQA Tool collects additional data required for the xProf component. This additional data is stored in the memory of each module, but it is unloaded when a dynamically-linked library is unloaded. Notification about the unloading of a library is unavailable to SQA Tool, and thus when SQA Tool attempts to access the unloaded module's memory, a general crash will result upon program exit. If the ATAC_DYNAMIC_LINKING flag is set to 'true', SQA Tool will not collect additional data for dynamically-linked libraries, and thus will not attempt to access unloaded modules' memory. In this event, however, xProf will not show correct counts. Note that only the xProf component will be affected, and the regular coverage of dynamically-linked libraries will still be accurately tracked by SQA Tool.</span></a><h3><a name="ATAC_ENABLE_DATAFLOW"><span>4.1.6 ATAC_ENABLE_DATAFLOW</span></a></h3><a><span>When ATAC_ENABLE_DATAFLOW is set to 'true' prior to program compilation with ATAC, static inter-procedural data flow analysis is enabled.  This enables the user to view "Def-use coverage" via the "Coverage" drop-down in SQA Tool.  For any use of a program variable, all of the places where that variable may have been defined immediately prior to that use are highlighted.  Dataflow analysis is computationally intensive, so ATAC_ENABLE_DATAFLOW is set to 'false' by default. </span></a><h3><a name="ATAC_GUI_CALLPATH_LIMIT"><span>4.1.7 ATAC_GUI_CALLPATH_LIMIT</span></a></h3><a><span>The graphical user interface can display all the call paths from the root of the program call graph to a particular function.  These call paths are sorted by length.  In practice, complex programs can exhibit hundreds of call paths to a function.  In most cases, the user is interested in viewing the shortest paths to try to determine how a function may be covered by a test case.  Since calculating the complete set of call paths may lead to slower response in displaying them, the user can set ATAC_GUI_CALLPATH_LIMIT to control the maximum number of call paths that will be displayed for each function.  This environment variable defaults to a generous 100, which means that the GUI will display the 100 shortest call paths by default.</span></a><h3><a name="ATAC_NOPOLL"><span>4.1.8 ATAC_NOPOLL</span></a></h3><a><span>By default, ATAC_NOPOLL is 'false', which means that xSuite monitors the specified trace file and automatically highlights the 'Update' button when it detects that program execution has caused a change to the trace file.   If ATAC_NOPOLL is set to 'true', xSuite does not automatically check if a trace file has been changed.</span></a><h3><a name="ATAC_NOTRACE"><span>4.1.9 ATAC_NOTRACE</span></a></h3><a><span>If ATAC_NOTRACE is set, no trace file is created. This option may be useful when it is necessary to run an instrumented program without creating a trace file.</span></a><h3><a name="ATAC_TEST"><span>4.1.10 ATAC_TEST</span></a></h3><a><span>Each program execution results in named test information being appended to the trace file. The default test name is the base name of the trace file. A numeric suffix is appended to each test name in order to make it unique (e.g., wordcount.1, wordcount.2, wordcount.3). If ATAC_TEST is set, its value is used as the test name. The test name must be less than 1024 characters long, composed of alpha-numeric characters, comma, period, at-sign, and underscore, and must not begin with a digit. Other characters in the test name are replaced by question mark, except that slash is replaced by colon and hyphen is replaced by the pound sign.</span></a><span> </span><h3><a name="ATAC_TMP"><span>4.1.11 ATAC_TMP</span></a></h3><a><span>While a test is running, ATAC stores coverage data in a temporary file. The default directory on Linux is the /usr/tmp directory. On Windows, the default is %SystemDrive%\TEMP for Windows XP. When ATAC_TMP is set, it is the path of the directory in which the temporary files will be written. The temporary file is written in append mode. On some systems, appending to a file on a networked file system is very slow. For this reason, it is recommended that temporary files be written to a directory on a local disk. Normally, temporary files are removed when test execution completes. (See</span></a><span> </span><a href="setup.html#107528"><span>Section 4.1.2, ATAC_COMPRESS</span></a><span> and </span><a href="managing.html#979919"><span>Chapter 7, ATAC: Managing Your Test Cases</span></a><span>.) </span><h3><a name="ATAC_TRACE"><span>4.1.12 ATAC_TRACE</span></a></h3><a><span>By default, trace data is written to a file named prog.trace, where prog is the name of the program executable. However, if ATAC_TRACE is set, it overrides this default and provides the name of the file to which the trace data will be written. If the name provided by ATAC_TRACE does not end with the .trace suffix, that suffix is automatically appended to the name.</span></a><span> </span><h2><a name="Linux Only Environment Information"><span>4.2 Linux Only Environment Information</span></a></h2><a><span>ATAC components make use of the following additional environment variables on Linux: ATAC_PEDANTIC, ATAC_SIGNAL, ATAC_TEST_FILE, PATH, and ATAC_UMASK. Of these, only the PATH variable must be set.</span></a><span> </span><p><a><span>On Linux, all of the variables that are significant at run-time may be set at link time or when atac_env_create is run (see</span></a><span> </span><a href="instrumenting.html#203858"><span>Section 5.1.4, Linking with ld</span></a><span>). The values set at link time become defaults which may be overridden at run-time.</span></p><h3><a name="ATAC_PEDANTIC"><span>4.2.1 ATAC_PEDANTIC</span></a></h3><a><span>ATAC_PEDANTIC is by default set to 'off', which overrides the pedantic flag that may have been set in make files with 'gcc -pendantic.'  The 'off' setting reduces the number of compilation warnings.</span></a><h3><a name="ATAC_SIGNAL"><span>4.2.2 ATAC_SIGNAL</span></a></h3><a><span>Normally, a test case consists of a complete execution of a program. In some situations, a single program execution may represent multiple test cases. The program can indicate the start of a new test case by calling atac_restart(). This requires that the code be modified to include this call, and that the call be removed when ATAC is not used. ATAC_SIGNAL provides an alternate way of indicating the start of a test case. If ATAC_SIGNAL is set to a Linux signal name or number, ATAC will start a new test case each time the specified signal is received by the program under test. The signal name must be a standard Linux signal name (e.g. SIGINT). The SIG prefix is not required and upper and lower case are not distinguished. The signal number may be any valid signal number for your system.</span></a><span> </span><h3><a name="ATAC_TEST_FILE"><span>4.2.3 ATAC_TEST_FILE</span></a></h3><a><span>If ATAC_TEST is not set and ATAC_TEST_FILE is the name of a readable file, the contents of the first line of that file is used as the test name. This facility is useful when it is not possible to vary the value of the ATAC_TEST variable at run-time. In this case the ATAC_TEST_FILE variable may be set at link-time to the name of a file that may be modified at run-time to contain the test name.</span></a><span> </span><h3><a name="PATH"><span>4.2.4 PATH</span></a></h3><a><span>When running ATAC component tools or programs compiled with atac, the PATH variable should include the bin directory containing ATAC component tools (refer to your shell's manual entry for more details). The component tools require that ataclib be found in the PATH search. This permits ATAC user-layer components to locate ATAC library components, and also permits you to execute each component from the command-line without having to enter its absolute path name. Programs compiled with atac require that atactm be found in the PATH search at run-time in order to compress the trace file (see</span></a><span> </span><a href="managing.html#973910"><span>Section 7.8, Concerning Trace File Compression</span></a><span>). </span><h3><a name="ATAC_UMASK"><span>4.2.5 ATAC_UMASK</span></a></h3><a><span>When a trace file is created, it is given the same read/write permissions as the directory in which it is created. This is important when multiple processes run by different owners will be writing to the same trace file, so that the write permissions on the trace file are not restricted to processes with the same owner as the process that first created the trace file. If it is necessary to further restrict access to the trace file, the ATAC_UMASK variable may be set.</span></a><span> </span><hr><br><a href="coverpage.html"><span>[Top]</span></a><span> </span><a href="overview.html"><span>[Prev]</span></a><span> </span><a href="instrumenting.html"><span>[Next]</span></a><span> </span><a href="sqatoolIX.html"><span>[Index]</span></a><span> </span><a href="sqatoolTOC.html"><span>[TOC]</span></a><span> </span><hr><br></div></body></html>